<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">
    <t t-name="e_product_generic.GenericConfiguratorDialog">
        <Dialog
            title="this.dialogTitle"
            contentClass="'configurator-dialog'"
        >
            <div class="container generic_configurator_dialog mt-4">
                <div class="o_list_renderer o_renderer table-responsive">
                    <table class="o_list_table table table-sm table-hover table-striped">
                        <thead class="table-light">
                            <tr>
                                <th class="o_list_number_th text-start" style="width: 55%;">
                                    <span class="fw-semibold">Product</span>
                                </th>
                                <th class="o_list_number_th text-center" style="width: 15%;">
                                    <span class="fw-semibold">Quantity</span>
                                </th>
                                <th class="o_list_number_th text-end" style="width: 15%;">
                                    <span class="fw-semibold">Unitary Cost</span>
                                </th>
                                <th class="o_list_number_th text-end" style="width: 15%;">
                                    <span class="fw-semibold">Subtotal Cost</span>
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr t-foreach="this.state.generic_bill_material_data" 
                                t-as="generic_product" 
                                t-key="generic_product.id"
                                class="o_data_row">
                                <td class="o_data_cell text-start">
                                    <span class="o_field_char" t-esc="generic_product.display_name"/>
                                </td>
                                <td class="o_data_cell text-center">
                                    <EFloat 
                                        value="generic_product.qty" 
                                        update="(value) => this.onchangeQty(value,generic_product)" 
                                        invalid="(invalid) => this.onchangeInvalid(invalid,generic_product)"
                                        digits="[16,0]"
                                        min="0"
                                        />
                                </td>
                                <td class="o_data_cell text-end">
                                    <EMonetary 
                                        readonly="true"
                                        value="generic_product.standard_price"
                                        digits="[16,2]"
                                        currencySymbol="this.product_template.currency_symbol"
                                        currencyPosition="this.product_template.currency_position"
                                        />
                                </td>
                                <td class="o_data_cell text-end">
                                    <EMonetary 
                                        readonly="true"
                                        value="generic_product.subtotal_cost"
                                        digits="[16,2]"
                                        currencySymbol="this.product_template.currency_symbol"
                                        currencyPosition="this.product_template.currency_position"/>
                                </td>
                            </tr>
                        </tbody>
                        <tfoot>
                            <tr class="o_data_row fw-bold">
                                <td class="o_data_cell text-end" colspan="3">
                                    <span>Total Cost:</span>
                                </td>
                                <td class="o_data_cell text-end">
                                    <EMonetary 
                                        value="this.state.totalCost"
                                        readonly="true"
                                        digits="[16,2]"
                                        class="'me-1'"
                                        currencySymbol="this.product_template.currency_symbol"
                                        currencyPosition="this.product_template.currency_position"/>
                                </td>
                            </tr>
                            <tr class="o_data_row fw-bold">
                                <td class="o_data_cell text-end" colspan="3">
                                    <span>Final Cost:</span>
                                </td>
                                <td class="o_data_cell text-end">
                                    <EMonetary 
                                        value="state.finalCost"
                                        update="(value) => this.updateFinalCost(value)"
                                        invalid="(invalid) => this.onchangeInvalidFinalCost(invalid)"
                                        min="0"
                                        digits="[16,2]"
                                        currencySymbol="this.product_template.currency_symbol"
                                        currencyPosition="this.product_template.currency_position"
                                        />
                                </td>
                            </tr>
                        </tfoot>
                    </table>
                </div>
            </div>
            
            <t t-set-slot="footer">
                <button class="btn btn-primary" t-on-click="confirm" t-att-disabled="this.state.invalidConfirm">
                    Confirm
                </button>
                <button class="btn btn-secondary" t-on-click="cancel">
                    Cancel
                </button>
            </t>
        </Dialog>
    </t>
</templates>